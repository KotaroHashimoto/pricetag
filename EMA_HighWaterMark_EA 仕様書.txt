★EMA_HighWaterMark_EA 仕様書

★概要★
ＥＭＡより上にいるか下にいるかでエントリー。HighWaterMarkの資金管理で勝率５割、リスクリワード１：１でも資金が増えていくようにするＥＡです。


-----------------------
エントリーロット設定
-----------------------

・固定lot設定 (0.01)
・MM 設定 per0.01 (100,000)
指定資金ごとに0.01lot積み増ししてロット数をあげていく。
例）20万だったら、0.02lot、30万なら0.03lot。


-----------------------
ハイオォーターマーク設定
-----------------------

・HighWaterMark  (ture)
・Start Funds  (1,000,000) ０の場合は、現在の口座残高を読み取って設定。
・Pool Percent Ratio (50)


チャートに下記の数字を表示お願い致します。

Start Funds　（最初の設定から変わることはありません）
Pool Funds
Entry Funds


＜初期動作＞
まず、Start Funds を読み込みます。
ここが０の場合は現在の口座残高を読み取ってください。

（ａ）Start Funds＝現在の口座残高　なら、
Pool Fundsは０に、Start Funds＝Entry Fundsにします。

（ｂ）Start Funds＜現在の口座残高　なら、
（現在の口座残高 - Start Funds）ｘ　Pool Percent Ratio（％）　の金額をPool Fundsに、
現在の口座残高 - Pool Funds　を Entry Fundsにします。

（ｃ）Start Funds＞現在の口座残高　なら、
（現在の口座残高 - Start Funds）ｘ　Pool Percent Ratio（％）　の金額をPool Fundsに、（マイナス表示）
Pool Fundsは０に、Start Funds＝Entry Fundsにします。
※この場合、計算がどんどん狂ってきてしまうと思いますが、この設定は想定していないので仕様上のバグありでOKです。
　理論上はStart Funds＝現在の口座残高になった時点で（ａ）（ｂ）に移行するのですが、
　使わない予定なので、そこまでプログラム入れなくてもいいかなと思っています。


＜資金が減った場合＞
Entry Fundsはそのままです。つまり資金に対して多少ロット数が高くなります。

＜資金が増えた場合＞
増えた資金のPool Percent Ratio分だけPool Fundsにおきます。
資金が５０００円増えて５０％だった場合は、２５００円がPool Fundsになります。
そして、Entry Fundsは現在の段高からPool Fundsを差し引いた分の資金に対してMMロット数をかけていきます。


※資金が増えれば増えるほどドローダウンもドローアップも減ってきますが、Pool Fundsが増えていきます。
※資金が増えているときは、必ず現在の口座残高＝Pool Funds＋Entry Fundsになります。


-----------------------
エントリー＆決済設定
-----------------------

EMA period    (52)
EMA Slope　(High/Mid/low/None)
Reverse Entry (fales)
TP (50)
SL (50)

現在値がＥＭＡより上なら買い、下なら売りでエントリーします。
ただし、Reverse Entryがtureの場合は、逆になります。


ＥＭＡですが、可能であれば傾きを見たいです。
このあたりは感覚ですが、Highなら４５度以上傾いて強いトレンドの最中のみ、lowなら１５度ぐらいの傾き、
Ｎｏｎｅなら現在値がＥＭＡの上にいるか下にいるかだけでの判定です。

プログラムがわかりませんが、例えば２つ前の足と１つ前の足を見て角度を検出し、
今形成されている足がＥＭＡのその方向より出ていたらエントリー、でしょうか？


エントリーが決済されたら、ロット数を計算しなおす最初に戻ります。



-----------------------
時間強制決済設定
-----------------------
Saturday exit (fales)
GMT shift (2)
base period Saturday hour shift （0)

GMT shiftはGMTオフセット値です。冬時間はサーバー＋２時間、夏時間はサーバー＋３時間です。
base period Saturday hour shift は相場が閉まる時間の調整です。
※ここは土曜日朝に決済されればOKですので、今までのプログラムと同じで大丈夫です！


