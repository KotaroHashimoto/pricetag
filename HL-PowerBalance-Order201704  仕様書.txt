★HL-PowerBalance-Order201704  仕様書


★概要★
通貨ペアの強弱を監視し、設定した高値・指値を更新したら、エントリーするＥＡです。
（HL-Line-OrderとPower_Balance_EMAの一部をあわせたようなＥＡです）
エントリーは同一方向に２つずつで、両方共ＳＬはありますが、ＴＰは１つしか設定しません。
もう１つのＴＰは指定タイミングでの決済です。

稼働すると、高値、底値を見て、通貨ペアの強弱の方向のみに予約、
ロット数、ＳＬ、ＴＰも計算式によって導かれます。



-----------------------
ＥＡ設定
-----------------------
マジックナンバー  (170412)
Friday pm Entry  (fales)

Friday pm Entryは日本時間でいう金曜日の午後６時以降の新規エントリーはしない機能です。


-----------------------
エントリーロット設定 (HL-Line-Orderと同じ）
-----------------------

・固定lot設定 (0.01)

・MM　複利設定 (false)
・MM 設定 per0.01 (100,000)
指定資金ごとに0.01lot積み増ししてロット数をあげていく。
例）20万だったら、0.02lot、30万なら0.03lot。

・Auto lot (ture)
・Auto lot Adjust times（1.0)
（現在の資金×0.00000001 / Width to launch）x (Auto lot Adjust times)
0.01lot未満は四捨五入

Width to launchの数値は下記にでてきますので、ご参照ください。
例えば現在の資金が１０万円で下記の例だとWidth to launch が0.334になりますので、
100,000 x 0.0000001 / 0.334 x 1.0 =0.02994...
ですので、0.03lotになります。
（取引先が１lot＝通貨数によってAuto lot Adjust timeを0.1にしたり10にしたり、ハイレバなら3.0などに変動）

MM設定とAuto lot が両方共tureになってしまったらAuto lot 優先でお願いします。








-----------------------
パワーバランス設定 (Power_Balance_EMA_201704と同じ仕様です）
-----------------------
PB setting  (ture)
PB distance (2)
GBP  (ture)
EUR  (ture)
CHF  (fales)
AUZ  (ture)
USD  (ture)
JPY  (ture)


通過の強さを見る方法はいくつかあろうかと思いますが、
今作られているローソク足が陰線か陽線かをチャートでみます。（色？だけで見ています）
監視する通貨は最大６つを想定しますが、ひとまずCHFを外して５通過１０ペアで見ます。

その結果、次のようだったとします。

１）EUR＜USD
２）GBP＜USD
３）AUD＜USD   
４）USD＞JPY
５）EUR＜JPY
６）AUD＜JPY   
７）GBP＜JPY
８）GBP＞AUD
９）ＥUR＞AUD
１０）EUR＜GBP 

１〜３で
　　　　　　　ＥＵＲ
ＵＳＤ　＞　ＧＢＰ
　　　　　　　ＡＵＤ
とまでわかります。

４でUSD＞JPYですから
　　　　　　　ＥＵＲ
ＵＳＤ　＞　ＧＢＰ
　　　　　　　ＡＵＤ
　　　　　　　ＪＰＹ
までわかります。

５でEUR＜JPYなので
　　　　　　（Ｅ移動）
ＵＳＤ　＞　ＧＢＰ
　　　　　　　ＡＵＤ
　　　　　　　ＪＰＹ　　＞　ＥＵＲ

６でAUD＜JPY なので
ＵＳＤ　＞　ＧＢＰ
　　　　　　（Ａ移動）　ＡＵＤ
　　　　　　　ＪＰＹ　　＞　ＥＵＲ

７でGBP＜JPYなので
ＵＳＤ　＞　（Ｇ移動）　ＧＢＰ
　　　　　　　　　　　　　　ＡＵＤ
　　　　　　　ＪＰＹ　　＞　ＥＵＲ

８でGBP＞AUDなので
ＵＳＤ　＞　　　　　　　　ＧＢＰ　＞　ＡＵＤ
　　　　　　　　　　　　　　（Ａ移動）
　　　　　　　ＪＰＹ　　＞　ＥＵＲ

９でＥUR＞AUDはすでに出ていますので確認ＯＫ！
１０でEUR＜GBP なので
ＵＳＤ　＞　　　　　　　　ＧＢＰ　＞　ＥＵＲ　＞ＡＵＤ
　　　　　　　ＪＰＹ　　＞　（Ｅ移動）

となります。



これをそれぞれ日足、４時間足で行い、両方で一番強弱のある通貨ペアを見つけ出します。
ここでPB distance も見ます。これが該当通貨の中にいくつの通貨があるかを見て、
いずれの足でもPB distanceの値以上離れている事が必須です。


例えば
日足　　　ＵＳＤ＞ＪＰＹ＞ＧＢＰ＞ＥＵＲ＞ＡＵＤ　で
４時間足　ＪＰＹ＞ＵＳＤ＞ＧＢＰ＞ＡＵＤ＞ＥＵＲ　なら

ＡＵＤ／ＪＰＹは、日足だとＧＢＰとＥＵＲの２つPB distanceがあり、
４時間足でもＵＳＤのＧＢＰの２つPB distanceがあるので、ＪＰＹの買い（ＡＵＤの売り）になります。

ＥＵＲ／ＵＳＤも該当し、ＵＳＤの買い（ＥＵＲの売り）になります。

ＡＵＤ／ＵＳＤは日足では３つPB distanceがあり強いですが、
４時間足では１つのPB distance（ＧＢＰ）しかないので、だめです。



これで通貨ペアと売買の方向が決定します。画面に
　D1　ＵＳＤ＞ＪＰＹ＞ＧＢＰ＞ＥＵＲ＞ＡＵＤ
  4H　ＪＰＹ＞ＵＳＤ＞ＧＢＰ＞ＡＵＤ＞ＥＵＲ　
の表示を出していただけるとうれしいです。

また、エントリースタンバイする通貨ペアと売買方向も表示してもらえるとうれしいです。
  ＡＵＤ／ＪＰＹ　ＳＥＬＬ　ＳＴＡＮＤＢＹ
　ＥＵＲ／ＵＳＤ　ＳＥＬＬ　ＳＴＡＮＤＢＹ




また、PB distanceが１もしくは０で、EUR/USD/JPYのみ監視する可能性もあります。
　D1　ＵＳＤ＞ＪＰＹ＞ＥＵＲ
  4H　ＪＰＹ＞ＵＳＤ＞ＥＵＲ
なら、PB distanceが０ならＥＵＲ／ＵＳＤ　ＳＥＬＬですが、PB distanceが１なら売買なしです。



PB setting が fales の場合は、現在貼り付けている通過ペアと時間足で売買します。




-----------------------
各種パラメーター
-----------------------

Candlestick period (14)

Divided by Width to launch  (3.0)
TP Width to launch times (2.0)
Buy Entry  adjust pips  (1.5)
Buy SL adjust pips  (1.0)
Buy TP adjust pips  (1.0)
Sell Entry adjust pips  (1.0)
Sell SL adjust pips  (1.0)
Sell TP adjust pips  (1.0)





まず、Candlestick period の足の数合計での「高値」「底値」のラインを出します。


そして下記に従って計４つの逆指値注文を想定しますが、
PB settingを使っている場合は、該当する方向のみのエントリーです。


例えば、高値が100.000、安値が99.000だとします。
そして、その差をdivided by Width to launch  で割った数値が
仕掛値（Width to launch）になります。割り切れない場合は切り上げです。

チャートの端っこに（左上？）そのレートを表示、Last exitの項目にFridayと表示
できると嬉しいです。
High price  100.000
Low price   99.000
Width to launch  0.334   ((100.000-99.000)/3.0=0.3333)


まずはbuy方向のセットです。
Monday High price + Buy adjust pips　に２つ逆指値を入れます。
100.000+1.5pipsなので100.015 にBuyが２つ。
２つとも逆指値から仕掛値（Width to launch）とSL adjust pipsを引いたところにストップリストを入れます。
100.015 - 0.334 - 0.01(1.0pips) = 99.671

次にTPは１つだけ入れます。
TPは逆指値から、仕掛値（Width to launch）のTP Width to launch timesをかけたものと
Buy TP adjust pipsを足したところに入れます。
100.015 + (0.334x2.0) + 0.01(1.0pips) = 100.693
もう１つはTPを入れず放置します。


１つがＴＰになった場合、残っているＴＰのＳＬを建値＋adjust pipsにしてください。
このＴＰは、Candlestick period で設定された足分を動いたら決済です。

ＳＬに引っかかった場合、もしくはＴＰが２つとも決済（手動を含む）した場合、最初に戻ります。
これを繰り返していきます。


なおこのロジックではCandlestick periodを１とする事も想定しています。
つまり、前の足の高値・安値を見て、エントリーしたら次の足にいったら決済です。



また、エントリー中にパワーバランスが変わった場合、エントリーしているものはそのままで
新規エントリーに現在のパワーバランスが適用されます。


