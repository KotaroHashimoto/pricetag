★HEADING_TSUNAGI_EA_201704


★概要★
狙った方向に進んだ場合、トレーリングストップなどで利益を伸ばしますが、逆方向に進んだ場合は、
「つなぎ売買」をしてある程度進んでから改めて反転を狙うＥＡです。
なお、狙いを定めず、BUY.SELL同時に売買させることも想定しています。


※理屈上は下記に書いた初期設定ぐらいの幅が良いかと思うのですが、
　検証してみたいことは、TP5，HEADING SETも5pipsスタート、Keep pipsが20pips、Hedging TPが5pipsぐらいの
　スキャル系で同時両建てした時にどうなるのか実験してみたいです。



-----------------------
BASIC BUY SET
-----------------------
Buy Lot         0.01
Buy MM      ture  /  false （初期設定  false）
Buy MM per 0.01　 100000

Buy Entry      ture  /  false （初期設定  ture ）
Buy Entry Adjust pips      0  (マイナスもあり）
Buy TP    200
Buy SL       0
Buy  trailing-stop    ture  /  false （初期設定  ture ）
Buy  trailing-stop width   40
Buy  TP trailing    ture  /  false （初期設定  ture ）
Buy hedging    ture  /  false （初期設定  ture ）


-----------------------
BASIC SELL SET
-----------------------
Sell Lot         0.01
Sell MM      ture  /  false （初期設定  false）
Sell MM per 0.01　 100000

Sell Entry      ture  /  false （初期設定  ture ）
Sell Entry Adjust pips      0  (マイナスもあり）
Sell TP    200
Sell SL       0
Sell  trailing-stop  ture  /  false （初期設定  ture ）
Sell  trailing-stop width  40
Sell  TP trailing    ture  /  false （初期設定  ture ）
Sell hedging    ture  /  false （初期設定  ture ）


-----------------------
HEADING SET
-----------------------
Hedging Start pips   20
Hedging Keep pips   80
Hedging TP      20


-----------------------
OTHER
-----------------------
EA Repeat  ture  /  false （初期設定  ture）




ロットは、単利の他、複利です。
複利は、MM per 0.01 でセットした値ごとに0.01lot増やしていきます。
初期設定だと10万円で0.01lot、20万円で0.02lotのようになります。



Buy(Sell）にエントリーするかしないかの設定があります。
両方共tureだと両建てです。


Entry Adjust pipsは、エントリーする値段を調整します。
０であれば即エントリーですが、10pipsであれば
Buyは今より10pips上でBuyエントリー、Sellは今より10pips下になったらSellエントリーです。（逆指値注文と同じです）
マイナス設定も想定に入っています。-10で設定した場合は、
Buyは今より10pips下でBuyエントリー、Sellは今より10pips上になったらSellエントリーです。（指値注文と同じです）

これは視覚的にわかるように、予約注文をだしておいてください。




トレーリングストップは設定値だけ利益がのったら、その設定値分だけ下にSLを移動します。
TP trailing が ture の時はTPも同じだけあげていきます。
例えば100.00 buy でエントリー (TP102.00）で100.40になったら、
SLは100.00、TPは102.40に。
さらに指定の40pips上の100.80まできたら、SLは100.40、TPは102.80です。



TPの設定に関してはこれだけですが、
hedging が ture の時はBASIC SETのSLの数値を無視し、HEADING SETで動きます。
これは両建てによるつなぎ売買で、最初のエントリーから仕込みが始まります。




HEADING SETを100.00 Buyエントリーで説明します。

Hedging Start pips   20 であれば、20pips落ちたら両建てしますので、
99.80 Sell を最初から予約注文をしておきます。

100.00 Buy　エントリー
 99.80 Sell 予約 です。

99.80がエントリーした時点で、利確はこれらに関するすべてのエントリーの合計で
考えていきます。この設定がHedging TP  です。


両建ての状態をHedging Keep pips分保持します。80ですから99.00までです。
99.00になったら、オリジナルの方向に追加エントリーし、
そのオリジナル方向の追加エントリーを基準に切り替えますので、
同時にHedging Start pips分だけ逆方向に予約をかけます。98.80 Sell ですね。

100.00 buy
 99.80 sell
 99.00 buyエントリー
 98.80 sell予約



このどこかで合計20pips利益がのったら(99.40以上）、全部決済しますが、
さらに逆方向に動いた場合、同じことを繰返していきます。

100.00 buy
 99.80 sell
 99.00 buy
 98.80 sell
 98.00 buyエントリー
 97.80 sell予約



さてさて、両建てして戻ってきた場合を考えます。
この場合、Hedging Keep pips  の数値を使って、この数値で
オリジナルの逆方向に追加エントリーを入れます。
（最初は100.00が基準になるので、80pips上昇したらsell)
それと同時にHedging Keep pips の数値を使って、この数値で
オリジナルの方向に追加エントリー予約を入れます。

101.00 buy予約
100.80 sellエントリー
100.00 buy
 99.80 sell

仮に101.00が発動して、さらに上がった場合はこの繰り返しです。


102.00 buy 予約
101.80 sellエントリー
101.00 buy
100.80 sell
100.00 buy
 99.80 sell

このどこかで合計20pips利益がのったら、全部決済です。




Buy hedging も Sell hedging  も　ture　の場合は、
それぞれが別の進行ではあるものの、同じ口座で行われる事もありえます。
見た目には両建ての両建てで混乱しそうですが（汗）




このEAはBASIC BUY SETとBASIC SELL SETで最初にエントリーした
２つ（もしくは１つ）が両方決済された時点でワンセットです。
BUYのみ決済ができたけど、SELLが残っている場合は、SELLが決済
されるまでは待っています。（手動で決済する可能性もあり）
両方決済されたらワンセットが終わりですので、EA Repeat がtureの場合は、最初に戻ります。



なお、HEADING SETを使用している場合、予約が発動するまでは通常のTP、SL、トレーリングストップとして機能し、
予約が発動したら両建てロジックとHedding TPによる決済に完全に切り替わります。

具体的にはHEADING SETを使うと、まずSLの代わりにつなぎ売り（買い）の予約が入ります。
ただし、この時点では、TPとトレーリングストップは通常のものが有効です。
目的の方向に行った場合は、トレーリングストップが発動した時点で
予約は不要になりますので、消去していただいても大丈夫ですし、
理屈上使うことはなくなるので、最後の一括決済までほったらかしでも大丈夫です。

HEADING SETが本格的に発動するのは、この予約がエントリーしたらです。
このエントリーを持って両建てロジックとHedding TPによる決済に完全に切り替わります。

